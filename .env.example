# PharmaIQ Environment Configuration
# Copy this file to .env and fill in your actual values

# ========================================
# APPLICATION SETTINGS
# ========================================
NODE_ENV=development
APP_NAME=PharmaIQ
APP_VERSION=1.0.0

# ========================================
# API GATEWAY
# ========================================
API_GATEWAY_PORT=3001
API_GATEWAY_HOST=localhost
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# WORKERS
# ========================================
AI_WORKER_PORT=3002
PROCESSING_WORKER_PORT=3003
SEO_WORKER_PORT=3004

# ========================================
# DATABASE CONFIGURATION
# ========================================
# These must match docker-compose.yml values
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=pharmaiq_db
DATABASE_USER=pharmaiq
DATABASE_PASSWORD=pharmaiq_dev
DATABASE_URL=postgresql://pharmaiq:pharmaiq_dev@localhost:5432/pharmaiq_db
DATABASE_SSL=false
DATABASE_LOGGING=false
DATABASE_SYNCHRONIZE=false  # Set to true only for development

# Database connection pool
DATABASE_MAX_CONNECTIONS=20
DATABASE_CONNECTION_TIMEOUT=60000

# ========================================
# REDIS CONFIGURATION
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=pharmaiq:

# Redis connection settings
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# ========================================
# AI SERVICES
# ========================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.3
OPENAI_TIMEOUT=30000

# Anthropic Configuration  
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_MAX_TOKENS=2000
ANTHROPIC_TEMPERATURE=0.3
ANTHROPIC_TIMEOUT=30000

# AI Processing Settings
AI_DEFAULT_PROVIDER=openai
AI_FALLBACK_PROVIDER=anthropic
AI_RETRY_ATTEMPTS=3
AI_RATE_LIMIT_DELAY=1000
AI_BATCH_SIZE=10
AI_CONCURRENT_REQUESTS=5

# ========================================
# SEARCH & INDEXING
# ========================================

# Elasticsearch Configuration
ELASTICSEARCH_NODE=http://localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=pharmaiq
ELASTICSEARCH_MAX_RETRIES=3
ELASTICSEARCH_REQUEST_TIMEOUT=30000

# ========================================
# CACHING
# ========================================

# Cache TTL (Time To Live) in seconds
CACHE_DEFAULT_TTL=3600
CACHE_DRUG_DATA_TTL=86400
CACHE_AI_CONTENT_TTL=604800
CACHE_SEO_METADATA_TTL=86400
CACHE_SEARCH_RESULTS_TTL=1800

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m

# Application specific logging
LOG_DATABASE_QUERIES=false
LOG_AI_REQUESTS=true
LOG_PERFORMANCE_METRICS=true

# ========================================
# SECURITY
# ========================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# Rate Limiting
RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AI_WINDOW=60000  # 1 minute
RATE_LIMIT_AI_MAX_REQUESTS=10

# CORS
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# ========================================
# MONITORING & OBSERVABILITY
# ========================================

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_MEMORY_THRESHOLD=80
HEALTH_CHECK_DISK_THRESHOLD=90

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9464
METRICS_ENDPOINT=/metrics

# ========================================
# DEVELOPMENT SETTINGS
# ========================================

# Development flags
DEV_MOCK_AI_RESPONSES=false
DEV_SKIP_VALIDATION=false
DEV_ENABLE_DEBUG_ROUTES=true
DEV_AUTO_SEED_DATA=false

# Testing
TEST_DATABASE_NAME=pharmaiq_test
TEST_REDIS_DB=1

# ========================================
# FEATURE FLAGS
# ========================================
FEATURE_AI_ENHANCEMENT=true
FEATURE_SEO_GENERATION=true
FEATURE_SEARCH_INDEXING=true
FEATURE_DRUG_COMPARISON=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_BATCH_PROCESSING=true

# ========================================
# PROCESSING CONFIGURATION
# ========================================

# Label Processing
MAX_CONCURRENT_LABEL_PROCESSING=5
LABEL_PROCESSING_TIMEOUT=300000  # 5 minutes
LABEL_BATCH_SIZE=50

# Content Processing
CONTENT_VALIDATION_STRICT=true
CONTENT_MIN_QUALITY_SCORE=70
CONTENT_AUTO_PUBLISH_THRESHOLD=85

# SEO Processing
SEO_AUTO_GENERATION=true
SEO_STRUCTURED_DATA_VERSION=v1.0
SEO_SITEMAP_MAX_URLS=50000